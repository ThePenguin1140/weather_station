uid: compass_widget
tags: []
props:
  parameters:
    - name: item
      label: Wind Direction Item
      type: TEXT
      required: true
      context: item
      description: The item containing wind direction in degrees (0-360)
  parameterGroups: []
timestamp: Jan 01, 2025, 12:00:00 AM
component: f7-card
config:
  title: "Wind Direction"
slots:
  default:
    - component: f7-block
      config:
        class: "compass-widget-container"
        style:
          padding: "20px"
          text-align: "center"
          display: "flex"
          flex-direction: "column"
          align-items: "center"
          justify-content: "center"
      slots:
        default:
          # Compass Rose Container
          - component: div
            config:
              class: "compass-rose"
              style:
                position: "relative"
                width: "min(300px, 80vw)"
                height: "min(300px, 80vw)"
                max-width: "100%"
                max-height: "100%"
                aspect-ratio: "1"
                border: "3px solid var(--f7-block-strong-border-color, #e0e0e0)"
                "border-radius": "50%"
                background: "radial-gradient(circle, #f5f5f5 0%, #ffffff 100%)"
                "box-shadow": "0 4px 8px rgba(0,0,0,0.1)"
                margin: "0 auto"
            slots:
              default:
                # Cardinal Direction Labels
                - component: Label
                  config:
                    text: "N"
                    class: "compass-label compass-north"
                    style:
                      position: "absolute"
                      top: "10px"
                      left: "50%"
                      transform: "translateX(-50%)"
                      "font-weight": "bold"
                      "font-size": "20px"
                      color: "#d32f2f"
                      "text-shadow": "1px 1px 2px rgba(255,255,255,0.8)"
                      "user-select": "none"
                - component: Label
                  config:
                    text: "E"
                    class: "compass-label compass-east"
                    style:
                      position: "absolute"
                      right: "10px"
                      top: "50%"
                      transform: "translateY(-50%)"
                      "font-weight": "bold"
                      "font-size": "18px"
                      color: "var(--f7-text-color, #333)"
                      "text-shadow": "1px 1px 2px rgba(255,255,255,0.8)"
                      "user-select": "none"
                - component: Label
                  config:
                    text: "S"
                    class: "compass-label compass-south"
                    style:
                      position: "absolute"
                      bottom: "10px"
                      left: "50%"
                      transform: "translateX(-50%)"
                      "font-weight": "bold"
                      "font-size": "18px"
                      color: "var(--f7-text-color, #333)"
                      "text-shadow": "1px 1px 2px rgba(255,255,255,0.8)"
                      "user-select": "none"
                - component: Label
                  config:
                    text: "W"
                    class: "compass-label compass-west"
                    style:
                      position: "absolute"
                      left: "10px"
                      top: "50%"
                      transform: "translateY(-50%)"
                      "font-weight": "bold"
                      "font-size": "18px"
                      color: "var(--f7-text-color, #333)"
                      "text-shadow": "1px 1px 2px rgba(255,255,255,0.8)"
                      "user-select": "none"
                # Intercardinal Directions
                - component: Label
                  config:
                    text: "NE"
                    class: "compass-label compass-ne"
                    style:
                      position: "absolute"
                      top: "25%"
                      right: "25%"
                      "font-weight": "bold"
                      "font-size": "14px"
                      color: "var(--f7-text-color, #333)"
                      "text-shadow": "1px 1px 2px rgba(255,255,255,0.8)"
                      "user-select": "none"
                - component: Label
                  config:
                    text: "SE"
                    class: "compass-label compass-se"
                    style:
                      position: "absolute"
                      bottom: "25%"
                      right: "25%"
                      "font-weight": "bold"
                      "font-size": "14px"
                      color: "var(--f7-text-color, #333)"
                      "text-shadow": "1px 1px 2px rgba(255,255,255,0.8)"
                      "user-select": "none"
                - component: Label
                  config:
                    text: "SW"
                    class: "compass-label compass-sw"
                    style:
                      position: "absolute"
                      bottom: "25%"
                      left: "25%"
                      "font-weight": "bold"
                      "font-size": "14px"
                      color: "var(--f7-text-color, #333)"
                      "text-shadow": "1px 1px 2px rgba(255,255,255,0.8)"
                      "user-select": "none"
                - component: Label
                  config:
                    text: "NW"
                    class: "compass-label compass-nw"
                    style:
                      position: "absolute"
                      top: "25%"
                      left: "25%"
                      "font-weight": "bold"
                      "font-size": "14px"
                      color: "var(--f7-text-color, #333)"
                      "text-shadow": "1px 1px 2px rgba(255,255,255,0.8)"
                      "user-select": "none"
                # Compass Needle
                - component: div
                  config:
                    class: "compass-needle"
                    style:
                      position: "absolute"
                      top: "50%"
                      left: "50%"
                      width: "4px"
                      height: "45%"
                      background: "linear-gradient(to top, #d32f2f 0%, #d32f2f 50%, #212121 50%, #212121 100%)"
                      "transform-origin": "bottom center"
                      transform: "translate(-50%, -100%) rotate(=(items[props.item].state || 0) + 'deg')"
                      "border-radius": "2px"
                      "z-index": "5"
                      transition: "transform 0.5s ease-out"
                      "box-shadow": "0 2px 4px rgba(0,0,0,0.3)"
                # Compass Center
                - component: div
                  config:
                    class: "compass-center"
                    style:
                      position: "absolute"
                      top: "50%"
                      left: "50%"
                      transform: "translate(-50%, -50%)"
                      width: "20px"
                      height: "20px"
                      background: "#333"
                      "border-radius": "50%"
                      "z-index": "10"
                      "box-shadow": "0 2px 4px rgba(0,0,0,0.3)"
          # Direction Info
          - component: f7-block
            config:
              class: "compass-info"
              style:
                "margin-top": "20px"
                "text-align": "center"
            slots:
              default:
                - component: Label
                  config:
                    text: "={{Math.round((items[props.item].state || 0) / 45) % 8 === 0 ? 'N' : Math.round((items[props.item].state || 0) / 45) % 8 === 1 ? 'NE' : Math.round((items[props.item].state || 0) / 45) % 8 === 2 ? 'E' : Math.round((items[props.item].state || 0) / 45) % 8 === 3 ? 'SE' : Math.round((items[props.item].state || 0) / 45) % 8 === 4 ? 'S' : Math.round((items[props.item].state || 0) / 45) % 8 === 5 ? 'SW' : Math.round((items[props.item].state || 0) / 45) % 8 === 6 ? 'W' : 'NW'}}"
                    class: "compass-direction"
                    style:
                      "font-size": "28px"
                      "font-weight": "bold"
                      color: "var(--f7-theme-color, #007aff)"
                      margin: "8px 0"
                - component: Label
                  config:
                    text: "={{Math.round(items[props.item].state || 0) + 'Â°'}}"
                    class: "compass-degrees"
                    style:
                      "font-size": "20px"
                      color: "var(--f7-text-color, #666)"
                      "margin-top": "5px"